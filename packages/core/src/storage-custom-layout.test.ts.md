# Snapshot report for `src/storage-custom-layout.test.ts`

The actual snapshot is saved in `storage-custom-layout.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## CustomLayout

> Snapshot 1

    {
      baseSlot: '0x1',
      namespaces: [],
      storage: [
        {
          contract: 'Base',
          label: 'x',
          offset: 0,
          renamedFrom: undefined,
          retypedFrom: undefined,
          slot: '1',
          src: 'file.sol:1',
          type: 't_uint256',
        },
        {
          contract: 'CustomLayout',
          label: 'y',
          offset: 0,
          renamedFrom: undefined,
          retypedFrom: undefined,
          slot: '2',
          src: 'file.sol:1',
          type: 't_uint256',
        },
      ],
      types: [
        [
          't_uint256',
          {
            label: 'uint256',
            members: undefined,
            numberOfBytes: '32',
          },
        ],
      ],
    }

## CustomLayout - fallback

> Snapshot 1

    {
      baseSlot: '0x1',
      namespaces: [],
      storage: [
        {
          contract: 'CustomLayout',
          label: 'y',
          renamedFrom: undefined,
          retypedFrom: undefined,
          src: 'file.sol:1',
          type: 't_uint256',
        },
      ],
      types: [
        [
          't_uint256',
          {
            label: 'uint256',
            members: undefined,
          },
        ],
      ],
    }

## CustomLayout changed root - fallback - bad

> Snapshot 1

    `Base slot for custom storage layout changed from 0x0000000000000000000000000000000000000000000000000000000000000001 to 0x0000000000000000000000000000000000000000000000000000000000000002␊
    ␊
    Do not change the base slot during upgrades when using custom storage layout.␊
    ␊
    If you need to change the base slot, ensure you also do the following:␊
    1. Adjust all storage variables to continue using their original slots.␊
    2. Configure your Solidity compiler options to include storage layouts according to https://docs.openzeppelin.com/upgrades-plugins/api-core#compile_contracts_with_storage_layouts␊
    3. Recompile both the original and updated contracts.␊
    4. Run the storage layout check again.`

## CustomLayout changed root decimal - fallback - bad

> Snapshot 1

    `Base slot for custom storage layout changed from 0x0000000000000000000000000000000000000000000000000000000000000001 to 0x0000000000000000000000000000000000000000000000000000000000000002␊
    ␊
    Do not change the base slot during upgrades when using custom storage layout.␊
    ␊
    If you need to change the base slot, ensure you also do the following:␊
    1. Adjust all storage variables to continue using their original slots.␊
    2. Configure your Solidity compiler options to include storage layouts according to https://docs.openzeppelin.com/upgrades-plugins/api-core#compile_contracts_with_storage_layouts␊
    3. Recompile both the original and updated contracts.␊
    4. Run the storage layout check again.`

## CustomLayout changed root scientific notation - fallback - bad

> Snapshot 1

    `Base slot for custom storage layout changed from 0x0000000000000000000000000000000000000000000000000000000000000001 to 0x00000000000000000000000000000000000000000000000000000004a817c800␊
    ␊
    Do not change the base slot during upgrades when using custom storage layout.␊
    ␊
    If you need to change the base slot, ensure you also do the following:␊
    1. Adjust all storage variables to continue using their original slots.␊
    2. Configure your Solidity compiler options to include storage layouts according to https://docs.openzeppelin.com/upgrades-plugins/api-core#compile_contracts_with_storage_layouts␊
    3. Recompile both the original and updated contracts.␊
    4. Run the storage layout check again.`

## CustomLayout changed to default - fallback - bad

> Snapshot 1

    `Base slot for custom storage layout changed from 0x0000000000000000000000000000000000000000000000000000000000000001 to 0x0000000000000000000000000000000000000000000000000000000000000000␊
    ␊
    Do not change the base slot during upgrades when using custom storage layout.␊
    ␊
    If you need to change the base slot, ensure you also do the following:␊
    1. Adjust all storage variables to continue using their original slots.␊
    2. Configure your Solidity compiler options to include storage layouts according to https://docs.openzeppelin.com/upgrades-plugins/api-core#compile_contracts_with_storage_layouts␊
    3. Recompile both the original and updated contracts.␊
    4. Run the storage layout check again.`

## CustomLayout changed root - fallback - bad (no layout info)

> Snapshot 1

    `Base slot for custom storage layout changed from 0x0000000000000000000000000000000000000000000000000000000000000001 to 0x0000000000000000000000000000000000000000000000000000000000000000␊
    ␊
    Do not change the base slot during upgrades when using custom storage layout.␊
    ␊
    If you need to change the base slot, ensure you also do the following:␊
    1. Adjust all storage variables to continue using their original slots.␊
    2. Configure your Solidity compiler options to include storage layouts according to https://docs.openzeppelin.com/upgrades-plugins/api-core#compile_contracts_with_storage_layouts␊
    3. Recompile both the original and updated contracts.␊
    4. Run the storage layout check again.`

## CustomLayout changed to default - fallback - bad (no layout info)

> Snapshot 1

    `Base slot for custom storage layout changed from 0x0000000000000000000000000000000000000000000000000000000000000001 to 0x0000000000000000000000000000000000000000000000000000000000000000␊
    ␊
    Do not change the base slot during upgrades when using custom storage layout.␊
    ␊
    If you need to change the base slot, ensure you also do the following:␊
    1. Adjust all storage variables to continue using their original slots.␊
    2. Configure your Solidity compiler options to include storage layouts according to https://docs.openzeppelin.com/upgrades-plugins/api-core#compile_contracts_with_storage_layouts␊
    3. Recompile both the original and updated contracts.␊
    4. Run the storage layout check again.`

## CustomLayout unsupported node type

> Snapshot 1

    `file.sol:1: Custom storage layout expression with node type BinaryOperation is not currently supported␊
    ␊
    Please report this at https://zpl.in/upgrades/report and include the \`layout at\` expression from your contract.`

## Namespaced - custom layout clash

> Snapshot 1

    `Custom layout for contract Namespaced_Custom_Layout_Clash clashes with the storage location for namespace erc7201:example.main␊
    ␊
    The namespace erc7201:example.main is defined in a struct at the following location:␊
    - file.sol:1␊
    ␊
    Specify a different custom layout for the contract or use a different namespace for the struct.`

## Namespaced - custom layout clash decimal

> Snapshot 1

    `Custom layout for contract Namespaced_Custom_Layout_Clash_Decimal clashes with the storage location for namespace erc7201:example.main␊
    ␊
    The namespace erc7201:example.main is defined in a struct at the following location:␊
    - file.sol:1␊
    ␊
    Specify a different custom layout for the contract or use a different namespace for the struct.`

## Namespaced - custom layout clash extra colon

> Snapshot 1

    `Custom layout for contract Namespaced_Custom_Layout_Clash_Extra_Colon clashes with the storage location for namespace erc7201:example:main␊
    ␊
    The namespace erc7201:example:main is defined in a struct at the following location:␊
    - file.sol:1␊
    ␊
    Specify a different custom layout for the contract or use a different namespace for the struct.`

## CustomLayout no namespace formula - ok

> Snapshot 1

    {
      baseSlot: '0x183a6125c38840424c4a85fa12bab2ab606c4b6d0e7cc73c0c06ba5300eab500',
      namespaces: [
        [
          'example.main',
          [
            {
              contract: 'CustomLayout_No_Namespace_Formula',
              label: 'x',
              src: 'file.sol:1',
              type: 't_uint256',
            },
            {
              contract: 'CustomLayout_No_Namespace_Formula',
              label: 'y',
              src: 'file.sol:1',
              type: 't_uint256',
            },
          ],
        ],
      ],
      storage: [
        {
          contract: 'CustomLayout_No_Namespace_Formula',
          label: 'a',
          offset: 0,
          renamedFrom: undefined,
          retypedFrom: undefined,
          slot: '10958655983261152271848436692291137275443024275653522991983264966744321209600',
          src: 'file.sol:1',
          type: 't_uint256',
        },
      ],
      types: [
        [
          't_uint256',
          {
            label: 'uint256',
            members: undefined,
            numberOfBytes: '32',
          },
        ],
      ],
    }

## CustomLayout unknown namespace formula - ok

> Snapshot 1

    {
      baseSlot: '0x183a6125c38840424c4a85fa12bab2ab606c4b6d0e7cc73c0c06ba5300eab500',
      namespaces: [
        [
          'erc0000:example.main',
          [
            {
              contract: 'CustomLayout_Unknown_Namespace_Formula',
              label: 'x',
              src: 'file.sol:1',
              type: 't_uint256',
            },
            {
              contract: 'CustomLayout_Unknown_Namespace_Formula',
              label: 'y',
              src: 'file.sol:1',
              type: 't_uint256',
            },
          ],
        ],
      ],
      storage: [
        {
          contract: 'CustomLayout_Unknown_Namespace_Formula',
          label: 'a',
          offset: 0,
          renamedFrom: undefined,
          retypedFrom: undefined,
          slot: '10958655983261152271848436692291137275443024275653522991983264966744321209600',
          src: 'file.sol:1',
          type: 't_uint256',
        },
      ],
      types: [
        [
          't_uint256',
          {
            label: 'uint256',
            members: undefined,
            numberOfBytes: '32',
          },
        ],
      ],
    }

## CustomLayout multiple namespaces

> Snapshot 1

    {
      baseSlot: '0x1',
      namespaces: [
        [
          'erc7201:example.b',
          [
            {
              contract: 'NamespaceB',
              label: 'x',
              src: 'file.sol:1',
              type: 't_uint256',
            },
          ],
        ],
        [
          'erc7201:example.a',
          [
            {
              contract: 'NamespaceA',
              label: 'x',
              src: 'file.sol:1',
              type: 't_uint256',
            },
          ],
        ],
      ],
      storage: [],
      types: [
        [
          't_uint256',
          {
            label: 'uint256',
            members: undefined,
          },
        ],
      ],
    }

## Gap - changed root - fallback - bad (no layout info)

> Snapshot 1

    `Base slot for custom storage layout changed from 0x0000000000000000000000000000000000000000000000000000000000000000 to 0x0000000000000000000000000000000000000000000000000000000000000019␊
    ␊
    Do not change the base slot during upgrades when using custom storage layout.␊
    ␊
    If you need to change the base slot, ensure you also do the following:␊
    1. Adjust all storage variables to continue using their original slots.␊
    2. Configure your Solidity compiler options to include storage layouts according to https://docs.openzeppelin.com/upgrades-plugins/api-core#compile_contracts_with_storage_layouts␊
    3. Recompile both the original and updated contracts.␊
    4. Run the storage layout check again.`
